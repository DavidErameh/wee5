# WEE5 Environment Variables
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to git!

# ============================================
# WHOP INTEGRATION (CRITICAL - P0)
# ============================================
# Per Documentation: 02_TECH STACK.MD, WHOP_INTEGRATION_SETUP.MD

# Whop API Key (from Whop Dashboard > Developer > API Keys)
WHOP_API_KEY=your_whop_api_key_here

# Whop App ID (from Whop Dashboard > Apps > Your App)
WHOP_APP_ID=your_app_id_here

# Whop Webhook Secret (for signature verification)
WHOP_WEBHOOK_SECRET=your_webhook_secret_here

# Bot User Configuration (REQUIRED for real-time XP awarding)
# See UNDERSTANDING_BOTUSER.MD for setup instructions
WHOP_BOT_USER_ID=user_xxxxxxxxxxxx
WHOP_BOT_TOKEN=oauth_xxxxxxxxxxxx

# ============================================
# DATABASE (Supabase)
# ============================================
# Per Documentation: 02_TECH STACK.MD, 05_ARCHITECTURE.MD

# Supabase Project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase Anon Key (public, safe for client-side)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Supabase Service Role Key (KEEP SECRET! Server-side only)
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ============================================
# REDIS CACHING (Upstash)
# ============================================
# Per Documentation: 02_TECH STACK.MD

# Upstash Redis REST URL
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io

# Upstash Redis REST Token
UPSTASH_REDIS_REST_TOKEN=your_upstash_token

# ============================================
# MONITORING & ERROR TRACKING
# ============================================

# Sentry DSN (optional but recommended)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# OPTIONAL FEATURES
# ============================================

# Enable reaction polling fallback (true/false)
# Per Documentation: 01_START HERE.MD, reaction-poller.ts
# Set to true if reactions aren't available in WebSocket events
ENABLE_REACTION_POLLING=false

# ============================================
# DEVELOPMENT
# ============================================

# Node Environment
NODE_ENV=development

# Next.js URL (for local development)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# PRODUCTION DEPLOYMENT
# ============================================
# These are set automatically by Vercel, but can be overridden

# Vercel URL (auto-set by Vercel)
# VERCEL_URL=your-app.vercel.app

# Production URL
# NEXT_PUBLIC_APP_URL=https://your-app.vercel.app

# ============================================
# SETUP CHECKLIST
# ============================================
# Before running the app, ensure you have:
# [ ] Installed whop-sdk-ts: pnpm add whop-sdk-ts
# [ ] Created bot user in Whop dashboard
# [ ] Generated bot OAuth token
# [ ] Added bot to target communities
# [ ] Configured all Whop variables above
# [ ] Set up Supabase project and tables
# [ ] Created Upstash Redis instance
# [ ] Configured webhooks in Whop dashboard
# [ ] Tested WebSocket connection
#
# See WHOP_INTEGRATION_SETUP.MD for detailed instructions

# ============================================
# SECURITY NOTES
# ============================================
# - NEVER commit .env.local to version control
# - Keep SUPABASE_SERVICE_ROLE_KEY secret (server-side only)
# - Rotate WHOP_API_KEY if exposed
# - Use environment-specific values (dev/staging/prod)
# - Enable Vercel environment variable encryption
# - Review Whop API key permissions regularly

# ============================================
# TROUBLESHOOTING
# ============================================
# If you encounter issues:
# 1. Verify all variables are set correctly
# 2. Check WHOP_BOT_USER_ID format: user_xxxxxxxxxxxx
# 3. Ensure bot has OAuth token (not API key)
# 4. Verify bot is added to communities
# 5. Check WebSocket connection in console logs
# 6. Review WHOP_INTEGRATION_SETUP.MD
# 7. See DOCUMENTATION_VS_PRODUCT_REPORT.MD for known gaps
